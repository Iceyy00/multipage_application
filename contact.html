<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Contact Us</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;line-height:1.4;color:#111}
    .container{max-width:760px;margin:1.5rem auto;padding:1rem}
    form{background:#fff;border-radius:10px;padding:1rem;box-shadow:0 2px 8px rgba(0,0,0,.06);display:grid;gap:.75rem}
    .row{display:grid;grid-template-columns:1fr;gap:.5rem}
    @media(min-width:700px){.two{grid-template-columns:1fr 1fr;gap:1rem}}
    label{font-weight:600;font-size:.95rem}
    input,textarea,button{font:inherit;padding:.5rem;border:1px solid #cfcfcf;border-radius:6px}
    input:focus,textarea:focus,button:focus{outline:3px solid #cfe8ff}
    textarea{min-height:120px;resize:vertical}
    .errorspan{color:#a00;font-size:.9rem;margin-top:.25rem;display:none}
    .errorspan[aria-hidden="false"]{display:block}
    .actions{display:flex;gap:.5rem;align-items:center}
    .success{background:#e6ffed;border:1px solid #8be08b;padding:.6rem;border-radius:6px;display:none}
    .success[aria-hidden="false"]{display:block}
    .visually-hidden{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap;border:0;padding:0;margin:-1px}
  </style>
</head>
<body>
  <main class="container" aria-labelledby="contact-heading">
    <header>
      <h1 id="contact-heading">Contact Us</h1>
      <p>Use the form below to reach out. All fields are required.</p>
    </header>

    <form id="contact-form" novalidate aria-describedby="form-errors">
      <div id="form-errors" class="visually-hidden" role="alert"></div>

      <div class="row two">
        <div>
          <label for="contact-name">Full name</label>
          <input id="contact-name" name="name" type="text" data-testid="test-contact-name" autocomplete="name" />
          <span id="error-name" role="alert" class="errorspan" data-testid="test-contact-error-name" aria-hidden="true"></span>
        </div>

        <div>
          <label for="contact-email">Email</label>
          <input id="contact-email" name="email" type="email" data-testid="test-contact-email" autocomplete="email" />
          <span id="error-email" role="alert" class="errorspan" data-testid="test-contact-error-email" aria-hidden="true"></span>
        </div>
      </div>

      <div>
        <label for="contact-subject">Subject</label>
        <input id="contact-subject" name="subject" type="text" data-testid="test-contact-subject" />
        <span id="error-subject" role="alert" class="errorspan" data-testid="test-contact-error-subject" aria-hidden="true"></span>
      </div>

      <div>
        <label for="contact-message">Message</label>
        <textarea id="contact-message" name="message" data-testid="test-contact-message"></textarea>
        <span id="error-message" role="alert" class="errorspan" data-testid="test-contact-error-message" aria-hidden="true"></span>
      </div>

      <div class="actions">
        <button type="submit" data-testid="test-contact-submit">Send message</button>
        <div id="contact-success" class="success" data-testid="test-contact-success" role="status" aria-hidden="true"></div>
      </div>
    </form>
  </main>

  <script>
    (function(){
      const form = document.getElementById('contact-form');
      const successEl = document.getElementById('contact-success');

      const fields = {
        name: { el: document.getElementById('contact-name'), err: document.getElementById('error-name'), testid: 'test-contact-error-name' },
        email: { el: document.getElementById('contact-email'), err: document.getElementById('error-email'), testid: 'test-contact-error-email' },
        subject: { el: document.getElementById('contact-subject'), err: document.getElementById('error-subject'), testid: 'test-contact-error-subject' },
        message: { el: document.getElementById('contact-message'), err: document.getElementById('error-message'), testid: 'test-contact-error-message' }
      };

      function setError(fieldKey, msg) {
        const f = fields[fieldKey];
        if (!f) return;
        f.err.textContent = msg;
        f.err.setAttribute('aria-hidden','false');
        f.el.setAttribute('aria-invalid','true');
        f.el.setAttribute('aria-describedby', f.err.id);
      }

      function clearError(fieldKey) {
        const f = fields[fieldKey];
        if (!f) return;
        f.err.textContent = '';
        f.err.setAttribute('aria-hidden','true');
        f.el.removeAttribute('aria-invalid');
        f.el.removeAttribute('aria-describedby');
      }

      function validate() {
        let valid = true;
        
        const name = fields.name.el.value.trim();
        const email = fields.email.el.value.trim();
        const subject = fields.subject.el.value.trim();
        const message = fields.message.el.value.trim();

        
        Object.keys(fields).forEach(k => clearError(k));
        successEl.setAttribute('aria-hidden','true');
        successEl.textContent = '';

        if (!name) { setError('name','Full name is required.'); valid = false; }
        if (!email) { setError('email','Email is required.'); valid = false; }
        else {
          
          const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          if (!re.test(email)) { setError('email','Enter a valid email (name@example.com).'); valid = false; }
        }
        if (!subject) { setError('subject','Subject is required.'); valid = false; }
        if (!message) { setError('message','Message is required.'); valid = false; }
        else if (message.length < 10) { setError('message','Message must be at least 10 characters.'); valid = false; }

        return { valid, values: { name, email, subject, message } };
      }

      form.addEventListener('submit', function(ev){
        ev.preventDefault();
        const { valid, values } = validate();
        if (!valid) {
          
          const firstInvalid = form.querySelector('[aria-invalid="true"]');
          if (firstInvalid) firstInvalid.focus();
          return;
        }

        
        successEl.textContent = 'Thanks â€” your message has been sent.';
        successEl.setAttribute('aria-hidden','false');

        
        form.reset();
        Object.keys(fields).forEach(k => clearError(k));
        
        successEl.tabIndex = -1;
        successEl.focus();
      });

      
      Object.keys(fields).forEach(k => {
        const f = fields[k].el;
        f.addEventListener('input', () => {
          
          clearError(k);
        });
      });
    })();
  </script>
</body>
</html>